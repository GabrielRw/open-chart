# Natal Report (Next.js)

Minimalist black/white astrology natal report app using FreeAstroAPI.

## Stack

- Next.js App Router + TypeScript
- Tailwind CSS
- React Hook Form + Zod
- Server-side proxy routes for API key safety
- Vitest unit tests

## Setup

1. Install dependencies:

```bash
npm install
```

2. Create environment file:

```bash
cp .env.example .env.local
```

3. Set your API key in `.env.local`:

```env
FREE_ASTRO_API_KEY=your_key_here
```

4. Run dev server:

```bash
npm run dev
```

Open [http://localhost:3000](http://localhost:3000).

## Scripts

- `npm run dev` start dev server
- `npm run build` create production build
- `npm run start` run production server
- `npm run lint` lint code
- `npm run test` run unit tests
- `npm run test:watch` watch unit tests
- `npm run format` check Prettier formatting

## API routes

- `GET /api/geo/search?q=...&limit=...`
  - Proxies FreeAstro `GET /geo/search`
- `POST /api/natal/calculate`
  - Proxies FreeAstro `POST /natal/calculate`

The key is read from `FREE_ASTRO_API_KEY` server-side only and is never sent to the client.

## Notes

- Report page expects a signed payload in query `data` generated by the home form.
- Payload is treated as expired after 24 hours to avoid stale report links.

## Deploy On Vercel

1. Push this repo to GitHub.
2. In Vercel, click `Add New...` -> `Project`, then import the repository.
3. In project settings, add environment variable:
   - `FREE_ASTRO_API_KEY` = your FreeAstro API key
4. Deploy.

Vercel will run:

- `npm install`
- `npm run build`

No API key is exposed to the browser because all upstream calls are proxied through Next.js route handlers.
